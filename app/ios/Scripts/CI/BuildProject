#!/usr/bin/env bash

set -euo pipefail

echo "Activate Hermit"
source bin/activate-hermit

SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )
"$SCRIPT_DIR"/EnsureGitLFS

echo "Building Xcode Project"
# Default to simulator-only builds for faster CI (unit tests, snapshots).
# Archive builds (team-alpha, etc.) should set IOS_SIMULATOR_ONLY=false in their pipeline env.
IOS_SIMULATOR_ONLY="${IOS_SIMULATOR_ONLY:-true}" just app/xcodegen
