<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Verification</title>
    <link rel="stylesheet" href="/static/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <script type="text/javascript" src="/static/bitcoin-format.js"></script>
    <script type="text/javascript" src="/static/tx/main.js"></script>
</head>
<body>
    <header class="secure-banner">
        <div class="secure-message">
            <img src="/static/Bitkeylogo.png" srcset="/static/Bitkeylogo.png 1x, /static/Bitkeylogo@2x.png 2x, /static/Bitkeylogo@3x.png 3x" alt="BitKey Logo" class="logo">
            This site is secure. <a href="#" class="learn-more">Learn More</a>
        </div>
    </header>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">

        <div class="verification-container active">
            <div class="animation-container">
                <img
                    src="/static/DarkLoader.gif"
                    alt="Loading animation"
                    style="width: 80px; height: 80px;"
                >
            </div>
            <h1 class="loading-text">Loading transaction details...</h1>
        </div>
    </div>

    <!-- Main Content -->
    <div class="content" id="mainContent">

        <!-- Amount Confirmation Screen -->
        <div id="amountConfirmation" class="verification-container">
            <h1>Is the amount you're sending <span class="inline-block amountSats" data-amount-sats></span>?</h1>
            <p class="subtitle">
                That's about <span class="inline-block amountFiatRounded" data-amount-fiat-rounded></span> 
                <span class="amountCurrency" data-amount-currency></span>
            </p>
        </div>

        <!-- Address Verification Screen -->
        <main id="addressVerification" class="verification-container">
            <h1>Enter the missing characters in the recipient's address</h1>

            <div id="addressGrid" class="address-grid">
                <!-- Generated address grid will go here -->
            </div>
        </main>

        <!-- Address Cancellation Screen -->
        <main id="cancellationScreen" class="verification-container">
            <h1>Transaction canceled</h1>
            <p class="subtitle">For your security, this transaction was canceled because verification wasn’t completed. Start a new transaction to try again.</p> 
            <p class="subtitle">If the amount or address doesn’t match what you entered in the Bitkey app, contact Support.</p>           
        </main>        

        <!-- Success Screen -->
        <div id="successScreen" class="verification-container">
            <img src="/static/success.svg" alt="Success" class="success-icon">
            <h1>Address Verified, you're all set</h1>
            <p class="subtitle">You can return to the Bitkey app on your mobile device.</p>

            <div id="fullAddressText" class="address-grid">
                <!-- Generated address text will go here -->
            </div>

            <div class="amount-card">
                <div class="amount-card-content">
                    <span class="amount-label">Amount</span>
                    <div class="amount-values">
                        <span id="amountSats" class="amountSats amount-sats" data-amount-sats></span>
                    </div>
                </div>
            </div>            

        </div>

    </div>

    <!-- Button container with top border -->
    <div class="button-container">
        <div class="action-buttons" id="amountButtons">
            <button id="yesBtn" class="primary-button">Yes</button>
            <button id="noBtn" class="secondary-button">No</button>
        </div>
        <div class="action-buttons" id="verificationButtons" style="display: none;">
            <button id="cancelBtn" class="secondary-button">Address doesn't match</button>
            <button id="skipAndVerifyBtn" class="secondary-button">Skip</button>
            <button id="confirmBtn" class="primary-button invisible">Continue</button>
        </div>
        <div class="action-buttons" id="supportButtons" style="display: none;">
            <a class="primary-button" href="https://bitkey.world/links/app" data-app-link="true">Return to Bitkey</a>
            <a class="secondary-button invisible" href="https://support.bitkey.world/">Contact Support</a>
        </div>        
    </div>
    
    <!-- MOCK DATA: This will be replaced by the server with real data -->
    <script type="application/json" id="verification-params">
        {
            "amountCurrency": "USD",
            "amountFiat": 202,
            "amountSats": 1894,
            "useBip177": false,
            "cancelToken": "q9Ix7CJLTaRR6DcZNIBDSLFk0omuUjn3of1gjQeRJuAWIMEuWyKc287T6dq6krYGNW_ijWX1nJVSyLHVotiyArqLUVuAGEwr152BX7bQuiJ3TuBI6WpIsugppqk9UT_cyzzSAVbII96B3n57xkWGC0H1icldGWxLLU4SdHmdLdM",
            "confirmToken": "x_A9Rp-f2hYLDpmy0uJUvxTPgjgLbOJWm8bChdTehL2QK_ScT35OpZQRHEAlbrSv0QmE9YOUiAk8vf_sxA5rgGEISJTeSNSlBxzhr4QS-hCE5aAlu4G3_Aav3AtrwvFgew8_nw8SAMSn_kLWYhtnT6vOMsHQxzUKwx6rSCCbEw0",
            "recipient": "tb1q8qmmrhcxv7cfxy45n60k6mwxrr83gnshgeawwhajsc24v5hts90q4zndd6",
            "verificationId": "urn:wallet-tx-verify:01JXN4H4SZBPJ28CW41PHCFDDS"
        }
    </script>
</body>
</html> 
